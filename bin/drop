#!/bin/bash

function error()
{
    echo $1
    exit 1
}

# Check common error case
[ -n "$1" ] || error "You need to specify a file to upload."
[ -f "$1" ] || error "$1 does not exists."

#Upload the file
url=$(curl -s -X POST -F file=@$1 http://drop.f00.fr/ | tr -d "\n")

# Paste the url into the clipboard (check linux/mac)
system=`uname`
[ "$system" == 'Linux' ] && echo $url && exit 0
[ "$system" == 'Darwin' ] && $(echo $url | pbcopy) && exit 0

"Your platform is not supported."
